#include <stdio.h>
#include <time.h>
#include <stdlib.h>

#define HEIGTH 5
#define WIDTH 20
#define NB_IMAGES 4

void sleep_ms(unsigned long milliseconds) {
    struct timespec ts;

    ts.tv_sec = milliseconds / 1000;
    ts.tv_nsec = (milliseconds % 1000) * 1000000;

    nanosleep(&ts, NULL);
}

int main() {
    int matrice[NB_IMAGES][HEIGTH][WIDTH] = {
        {
            {0, 0, 0, 0, 0, 1, 0, 0, 0, 7, 7, 0, 0, 0, 1, 0, 0, 0, 0, 0},

            {0, 0, 0, 0, 0, 3, 3, 3, 3, 4, 4, 3, 3, 3, 3, 0, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 0, 0, 2, 2, 4, 4, 2, 2, 0, 0, 0, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0} 
        },
        {
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0},

            {0, 0, 0, 0, 1, 3, 3, 3, 3, 4, 4, 3, 3, 3, 3, 1, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 0, 0, 2, 2, 4, 4, 2, 2, 0, 0, 0, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0} 
        },
        {
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0},

            {0, 0, 0, 0, 0, 3, 3, 3, 3, 4, 4, 3, 3, 3, 3, 0, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 1, 0, 2, 2, 4, 4, 2, 2, 0, 1, 0, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0}
        },
        {
            {0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 7, 0, 0, 0, 0, 0, 0, 0, 0, 0},

            {0, 0, 0, 0, 1, 3, 3, 3, 3, 4, 4, 3, 3, 3, 3, 1, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 0, 0, 2, 2, 4, 4, 2, 2, 0, 0, 0, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0},
        
            {0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0}
        }
    };
    printf("\e[?25l\e[2J");
    for (int i = 0; i < 10; i++)
    {
        for (int k = 0; k < NB_IMAGES; k++)
        {
            printf("\e[1;1H");
            for (int i = 0; i < HEIGTH; i++)
            {
                for (int j = 0; j < WIDTH; j++)
                {
                    printf("\e[4%dm ", matrice[k][i][j]);
                    fflush(stdout);
                }
                printf("\e[40m\n");
            }
            sleep_ms(100);
        }
    }   
    printf("\e[1;1H");
    for (int i = 0; i < HEIGTH; i++)
    {
        for (int j = 0; j < WIDTH; j++)
        {
            printf("\e[4%dm ", matrice[0][i][j]);
        }
        printf("\e[40m\n");
    }
    printf("\e[?25h");
    return 0;
}
